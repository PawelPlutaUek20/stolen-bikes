(this["webpackJsonpcoding-challenge-frontend-react"]=this["webpackJsonpcoding-challenge-frontend-react"]||[]).push([[0],{127:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(11),i=n.n(c),r=n(12),o=n(18),s=n(82),l=n(17),d=n(167),j=n(156),b=n(159),h=n(168),u=n(162),m=n(4),O=Object(j.a)({textField:{width:"31%"},inputField:{width:"22%"},buttonField:{maxHeight:36,width:"20%",marginTop:12}}),g=function(e){var t=e.loading,n=e.handleClick,c=O(),i=Object(a.useState)(""),r=Object(o.a)(i,2),j=r[0],g=r[1],x=Object(a.useState)(null),p=Object(o.a)(x,2),f=p[0],v=p[1],y=Object(a.useState)(null),N=Object(o.a)(y,2),w=N[0],k=N[1];return Object(m.jsxs)(b.a,{container:!0,spacing:2,justify:"space-between",children:[Object(m.jsx)(h.a,{value:j,className:c.textField,label:"Search case descriptions",onChange:function(e){return g(e.target.value)}}),Object(m.jsxs)(l.a,{utils:s.a,children:[Object(m.jsx)(d.a,{className:c.inputField,autoOk:!0,disableFuture:!0,variant:"inline",placeholder:"18.08.2014",format:"dd.MM.yyyy",label:"From",value:f,onChange:function(e){return v(e)}}),Object(m.jsx)(d.a,{className:c.inputField,autoOk:!0,disableFuture:!0,variant:"inline",placeholder:"18.08.2014",format:"dd.MM.yyyy",label:"To",value:w,onChange:function(e){return k(e)}})]}),Object(m.jsx)(u.a,{color:"primary",className:c.buttonField,variant:"contained",disabled:t,onClick:function(){return n(j||"",f?new Date(f).getTime()/1e3:"",w?new Date(w).getTime()/1e3:"")},children:"Find cases"})]})},x=n(40),p=n(128),f=n(161),v=n(163),y=function(e){return Object(m.jsxs)("svg",Object(x.a)(Object(x.a)({viewBox:"0 0 75.45 75.45"},e),{},{children:[Object(m.jsx)("path",{d:"M14 61.71a14 14 0 1 1 14-14 14 14 0 0 1-14 14zm0-25a11 11 0 1 0 11 11 11 11 0 0 0-11-11zM61.45 61.71a14 14 0 1 1 14-14 14 14 0 0 1-14 14zm0-25a11 11 0 1 0 11 11 11 11 0 0 0-11-11z"}),Object(m.jsx)("path",{d:"M35.22 49.22H14a1.5 1.5 0 0 1-1.13-2.48l13.35-15.4-3.59-8a1.5 1.5 0 0 1 2.74-1.23l3.44 7.65 23.35-7.15a1.5 1.5 0 0 1 1.65 2.32L36.45 48.58a1.49 1.49 0 0 1-.84.53h-.33zm-17.95-3H32.9l-5.34-11.87zM30 32.53l5.5 12.23 13.19-17.94z"}),Object(m.jsx)("path",{d:"M30.23 24.23h-10a1.5 1.5 0 0 1 0-3h10a1.5 1.5 0 0 1 0 3zM61.45 49.22a1.5 1.5 0 0 1-1.4-1l-11.24-30a1.5 1.5 0 0 1 .88-1.93h.05l7.49-2.5a1.5 1.5 0 1 1 .95 2.85l-6 2 10.69 28.5a1.5 1.5 0 0 1-1.42 2.08z"})]}))},N=Object(j.a)((function(e){return{contentContainer:{flex:"auto",display:"flex",flexDirection:"column",padding:e.spacing(2)},paper:{display:"flex",maxHeight:200},imageContainer:{width:200,height:200,flex:"none"},description:{display:"-webkit-box",boxOrient:"vertical",lineClamp:3,wordBreak:"break-all",overflow:"hidden"},title:{display:"-webkit-box",boxOrient:"vertical",lineClamp:1,wordBreak:"break-all",overflow:"hidden"},image:{width:200,height:200,padding:25},svg:{backgroundColor:e.palette.action.hover,fill:e.palette.background.paper,width:150,height:150},reported:{marginTop:"auto",alignSelf:"flex-end",fontStyle:"italic"},centerImage:{padding:25},link:{color:e.palette.info.light}}})),w=function(e){var t=e.incident,n=N(),a=Object(r.f)();return Object(m.jsxs)(f.a,{className:n.paper,children:[Object(m.jsx)("div",{className:n.imageContainer,children:t.media.image_url_thumb?Object(m.jsx)("div",{children:Object(m.jsx)("img",{alt:"bike",src:t.media.image_url_thumb,className:n.image})}):Object(m.jsx)("div",{className:n.centerImage,children:Object(m.jsx)(y,{className:n.svg})})}),Object(m.jsxs)("div",{direction:"column",className:n.contentContainer,children:[Object(m.jsx)(p.a,{className:n.title,gutterBottom:!0,variant:"h6",children:Object(m.jsx)(v.a,{className:n.link,underline:"always",onClick:function(){return a.push("/case/".concat(t.id))},href:"#",children:t.title})}),Object(m.jsx)(p.a,{className:n.description,gutterBottom:!0,variant:"body1",children:t.description||"No description"}),Object(m.jsx)(p.a,{gutterBottom:!0,variant:"body1",className:n.title,children:"".concat(new Date(1e3*t.occurred_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit",weekday:"short"})," - ").concat(t.address," ")}),Object(m.jsx)(p.a,{variant:"caption",className:n.reported,children:"Reported: ".concat(new Date(1e3*t.updated_at).toLocaleString("en-US"))})]})]})},k=n(169),B=n(59),C=n.n(B),S=Object(j.a)((function(e){return{total:{textAlign:"end"},pagination:{marginTop:e.spacing(2)}}})),F=function(e){var t=e.incidents,n=S(),a=Object(r.f)(),c=Object(r.g)(),i=parseInt(C.a.parse(c.search).page)||1;return Object(m.jsxs)(b.a,{container:!0,spacing:2,children:[Object(m.jsx)(b.a,{item:!0,xs:12,children:Object(m.jsxs)(p.a,{variant:"body1",className:n.total,children:["total: ",t.length]})}),Object(m.jsx)(b.a,{item:!0,xs:12,children:Object(m.jsx)(b.a,{container:!0,spacing:2,direction:"column",children:t.slice(10*(i-1),10*i).map((function(e){return Object(m.jsx)(b.a,{item:!0,children:Object(m.jsx)(w,{incident:e})},e.id)}))})}),Object(m.jsx)(b.a,{item:!0,container:!0,xs:12,justify:"center",children:Object(m.jsx)(k.a,{size:"large",onChange:function(e,t){var n=C.a.stringify(Object(x.a)(Object(x.a)({},C.a.parse(c.search)),{},{page:t}));a.push("/?".concat(n))},page:i,className:n.pagination,count:Math.ceil(t.length/10),showFirstButton:!0,showLastButton:!0})})]})},T=n.p+"static/media/logo.114a8706.svg",I=Object(j.a)((function(e){return{header:{display:"flex",alignItems:"center",padding:e.spacing(2),justifyContent:"center"},logo:{width:100,height:100,marginRight:25}}})),M=function(){var e=I();return Object(m.jsxs)("header",{className:e.header,children:[Object(m.jsx)("div",{children:Object(m.jsx)("img",{src:T,alt:"Logo",className:e.logo})}),Object(m.jsxs)("div",{children:[Object(m.jsx)(p.a,{variant:"h4",gutterBottom:!0,children:"Police Departament of Berlin"}),Object(m.jsx)(p.a,{variant:"h5",children:"Stolen bykes"})]})]})},z=n(164),L=Object(j.a)((function(e){return{container:{minWidth:640},header:{marginTop:e.spacing(2)}}})),_=function(){var e=L(),t=Object(a.useState)([]),n=Object(o.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)(!0),s=Object(o.a)(r,2),l=s[0],d=s[1],j=Object(a.useState)(""),h=Object(o.a)(j,2),u=h[0],O=h[1],x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";d(!0),fetch("https://bikewise.org:443/api/v2/incidents?incident_type=theft&query=".concat(e,"&occurred_after=").concat(t,"&occurred_before=").concat(n,"&page=1&per_page=22&proximity=Berlin")).then((function(e){return e.json()})).then((function(e){d(!1),i(e.incidents)})).catch((function(e){d(!1),O("Ooops, something went wrong")}))};return Object(a.useEffect)((function(){x()}),[]),Object(m.jsx)(z.a,{maxWidth:"md",className:e.container,children:Object(m.jsxs)(b.a,{container:!0,spacing:6,children:[Object(m.jsx)(b.a,{item:!0,xs:12,className:e.header,children:Object(m.jsx)(M,{})}),Object(m.jsx)(b.a,{item:!0,xs:12,children:Object(m.jsx)(g,{loading:l,handleClick:x})}),Object(m.jsx)(b.a,{item:!0,xs:12,children:l?Object(m.jsx)(p.a,{variant:"body1",gutterBottom:!0,children:"Loading..."}):u?Object(m.jsx)(p.a,{variant:"body1",gutterBottom:!0,color:"error",children:u}):0===c.length?Object(m.jsx)(p.a,{variant:"body1",gutterBottom:!0,children:"No results"}):Object(m.jsx)(F,{incidents:c})})]})})},D=(n(126),n(60)),E=n.n(D),W={mapBoxToken:"pk.eyJ1IjoicGF3ZWw2OTM5IiwiYSI6ImNrcXNxeTdmMDE5eXkydW8xejV6dnUzMTkifQ._LdpVBYvNoHXeByxVdJsqg"};E.a.accessToken=W.mapBoxToken;var R=Object(j.a)((function(e){return{map:{height:"100%",position:"relative"},mapContainer:{height:"100%"},sideBar:{backgroundColor:"rgba(35, 55, 75, 0.9)",color:"#ffffff",padding:"6px 12px",fontFamily:"monospace",zIndex:1,position:"absolute",top:0,left:0,margin:12,borderRadius:4}}})),H=function(e){var t=e.address,n=R(),c=Object(a.useRef)(null),i=Object(a.useRef)(null),r=Object(a.useState)(13.38333),s=Object(o.a)(r,2),l=s[0],d=s[1],j=Object(a.useState)(52.51667),b=Object(o.a)(j,2),h=b[0],u=b[1],O=Object(a.useState)(14),g=Object(o.a)(O,2),x=g[0],p=g[1];return Object(a.useEffect)((function(){i.current||function(e){return fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/country=de&".concat(e,".json?access_token=").concat(E.a.accessToken)).then((function(e){return e.json()})).then((function(e){return e.features})).then((function(e){return e[0].geometry}))}(t).then((function(e){i.current=new E.a.Map({container:c.current,style:"mapbox://styles/mapbox/streets-v11",center:e.coordinates,zoom:x})}))})),Object(a.useEffect)((function(){i.current&&i.current.on("move",(function(){d(i.current.getCenter().lng.toFixed(4)),u(i.current.getCenter().lat.toFixed(4)),p(i.current.getZoom().toFixed(2))}))})),Object(m.jsxs)("div",{className:n.map,children:[Object(m.jsxs)("div",{className:n.sideBar,children:["Longitude: ",l," | Latitude: ",h]}),Object(m.jsx)("div",{ref:c,className:n.mapContainer})]})},P=Object(j.a)((function(e){return{bold:{fontWeight:600},map:{width:"100%",height:"50vh",backgroundColor:e.palette.action.hover}}})),J=function(e){var t=e.incident,n=P();return Object(m.jsxs)(b.a,{container:!0,spacing:2,children:[Object(m.jsxs)(b.a,{item:!0,xs:12,children:[Object(m.jsx)(p.a,{variant:"h6",gutterBottom:!0,children:t.title}),Object(m.jsx)(p.a,{display:"inline",variant:"body1",className:n.bold,children:"Stolen"}),Object(m.jsx)(p.a,{display:"inline",variant:"body1",children:" ".concat(new Date(1e3*t.occurred_at).toLocaleString("en-US",{month:"short",day:"2-digit",hour:"numeric",timeZone:"Europe/Berlin",hour12:!0})," at ").concat(t.address," ")})]}),Object(m.jsx)(b.a,{item:!0,xs:12,children:Object(m.jsx)("div",{className:n.map,children:Object(m.jsx)(H,{address:t.address})})}),Object(m.jsxs)(b.a,{item:!0,xs:12,children:[Object(m.jsx)(p.a,{variant:"h6",gutterBottom:!0,children:"DESCRIPTION OF INCIDENT"}),Object(m.jsx)(p.a,{variant:"body1",children:t.description||"No description"})]})]})},U=Object(j.a)((function(e){return{container:{minWidth:640},header:{marginTop:e.spacing(2)}}})),V=function(e){var t=e.match,n=U(),c=Object(a.useState)([]),i=Object(o.a)(c,2),r=i[0],s=i[1],l=Object(a.useState)(!0),d=Object(o.a)(l,2),j=d[0],h=d[1],u=Object(a.useState)(""),O=Object(o.a)(u,2),g=O[0],x=O[1];return Object(a.useEffect)((function(){h(!0),fetch("https://bikewise.org:443/api/v2/incidents/".concat(t.params.id)).then((function(e){return e.json()})).then((function(e){h(!1),s(e.incident)})).catch((function(e){h(!1),x("Ooops, something went wrong")}))}),[t.params.id]),Object(m.jsx)(z.a,{maxWidth:"md",className:n.container,children:Object(m.jsxs)(b.a,{container:!0,spacing:6,children:[Object(m.jsx)(b.a,{item:!0,xs:12,className:n.header,children:Object(m.jsx)(M,{})}),Object(m.jsx)(b.a,{item:!0,xs:12,children:j?Object(m.jsx)(p.a,{variant:"body1",gutterBottom:!0,children:"Loading..."}):g?Object(m.jsx)(p.a,{variant:"body1",gutterBottom:!0,color:"error",children:g}):0===r.length?Object(m.jsx)(p.a,{variant:"body1",gutterBottom:!0,children:"No results"}):Object(m.jsx)(J,{incident:r})})]})})},X=Object(j.a)((function(e){return{container:{minWidth:640},header:{marginTop:e.spacing(2)}}})),Z=function(){var e=X();return Object(m.jsx)(z.a,{maxWidth:"md",className:e.container,children:Object(m.jsxs)(b.a,{container:!0,spacing:6,children:[Object(m.jsx)(b.a,{item:!0,xs:12,className:e.header,children:Object(m.jsx)(M,{})}),Object(m.jsx)(b.a,{item:!0,xs:12,children:Object(m.jsx)(p.a,{variant:"h6",gutterBottom:!0,align:"center",children:"404 Page Not Found"})})]})})},q=function(){return Object(m.jsxs)(r.c,{children:[Object(m.jsx)(r.a,{path:"/",exact:!0,component:_}),Object(m.jsx)(r.a,{path:"/case/:id",component:V}),Object(m.jsx)(r.a,{component:Z})]})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,173)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))},A=n(83),G=n(165),Q=n(166),K=n(43),$=Object(A.a)({palette:{type:"dark"}});i.a.render(Object(m.jsx)(K.a,{basename:"/stolen-bikes",children:Object(m.jsxs)(G.a,{theme:$,children:[Object(m.jsx)(Q.a,{}),Object(m.jsx)(q,{})]})}),document.getElementById("root")),Y()}},[[127,1,2]]]);
//# sourceMappingURL=main.a7b34dd3.chunk.js.map